const widthMobile=window.innerWidth>0?window.innerWidth:screen.width,menu=()=>{const t=document.querySelector(".overlay"),e=document.querySelector(".navegacion"),a=document.querySelector("body"),n=document.querySelectorAll(".navegacion-btn"),s=document.querySelector(".burger"),o=()=>{s.classList.toggle("clicked"),t.classList.toggle("show"),e.classList.toggle("show"),a.classList.toggle("overflow")};for(document.querySelector(".burger").addEventListener("click",o),document.querySelector(".overlay").addEventListener("click",o),i=0;i<n.length;i++)n[i].addEventListener("click",function(){r()});const r=()=>{t.classList.remove("show"),e.classList.remove("show"),s.classList.remove("clicked")}};menu();const lineYear=()=>{const t=24,e=24,a=24,n=24;let s=0,o=0;const r=d3.select(".dm-job-year-graph"),c=r.select("svg"),d={};let l;const i=d3.timeParse("%d-%b-%y"),m=d3.bisector(t=>t.fecha).left,u=r.append("div").attr("class","tooltip tooltip-jobs").style("opacity",0),h=t=>{const a=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+o+")").call(a);const r=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-s);t.select(".axis-y").call(r);const h=t.select(".focus"),p=t.select(".overlay");h.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",o),h.append("line").attr("class","y-hover-line hover-line").attr("x1",s).attr("x2",s),h.append("circle").attr("class","circle-focus").attr("r",2),p.attr("width",s+n+e).attr("height",o).on("mouseover",function(){h.style("display",null)}).on("mouseout",function(){h.style("display","none"),u.style("opacity",0)}).on("mousemove",function(){const t=d.count.x.invert(d3.mouse(this)[0]),e=m(l,t,1),a=l[e-1],n=l[e],s=t-a.fecha>n.fecha-t?n:a;h.attr("transform",`translate(${d.count.x(s.fecha)},${d.count.y(s.total)})`),u.style("opacity",1).html(`<p class="tooltip-text">En ${s.mes} de ${s.year} se publicaron ${s.total} ofertas.<p/>`),h.select(".x-hover-line").attr("y2",o-d.count.y(s.total)),h.select(".y-hover-line").attr("x1",0-d.count.x(s.fecha))}),s>767&&setTimeout(function(){const t=[{data:{fecha:"1-oct-09",total:32},dy:-150,dx:52,note:{title:"1.ª oferta de UX: 1/10/09",wrap:430,align:"middle"}},{data:{fecha:"1-feb-14",total:80},dy:-165,dx:0,note:{title:"1.ª oferta de Angular: 3/2/14",wrap:430,align:"middle"}},{data:{fecha:"1-oct-16",total:140},dy:-90,dx:50,note:{title:"1.ª oferta de React: 10/2/16",wrap:430,align:"middle"}}].map(t=>(t.subject={radius:4},t)),e=d3.timeFormat("%d-%b-%y");window.makeAnnotations=d3.annotation().annotations(t).type(d3.annotationCalloutCircle).accessors({x:t=>d.count.x(i(t.fecha)),y:t=>d.count.y(t.total)}).accessorsInverse({fecha:t=>e(d.count.x.invert(t.x)),total:t=>d.count.y.invert(t.y)}).on("subjectover",function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!1)}).on("subjectout",function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!0)}),c.append("g").attr("class","annotation-test").call(makeAnnotations),c.selectAll("g.annotation-connector, g.annotation-note")})},p=l=>{const i=r.node().offsetWidth;s=i-n-e,o=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+n+","+t+")",u=c.select(".dm-job-year-graph-container");u.attr("transform",m);const p=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(s,o);const y=r.select(".dm-job-year-graph-container-bis"),x=y.selectAll(".line").data([l]),g=x.enter().append("path").attr("class","line").attr("stroke-width","1.5"),f=y.selectAll(".circles").data(l),v=f.enter().append("circle").attr("class","circles").attr("fill","#921d5d").attr("opacity",0).transition().duration(1800).ease(d3.easeLinear).attr("opacity",1);x.merge(g).attr("d",p),f.merge(v).attr("cx",t=>d.count.x(t.fecha)).attr("cy",t=>d.count.y(t.total)).attr("r",3),h(u);const b=g.node().getTotalLength();g.attr("stroke-dasharray",b+" "+b).attr("stroke-dashoffset",b).transition().duration(1500).ease(d3.easeLinear).attr("stroke-dashoffset",0)};window.addEventListener("resize",()=>{p(l)}),d3.csv("csv/data-ofertas-anyo.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.fecha=i(t.fecha),t.total=+t.total}),(()=>{const t=c.select(".dm-job-year-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-year-graph-container-bis"),t.append("text").attr("class","legend").attr("y","1rem").style("text-anchor","start").text("Número de ofertas"),t.append("rect").attr("class","overlay"),t.append("g").attr("class","focus").style("display","none")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(l,t=>t.total+t.total/4)]);d.count={x:t,y:e}})(),p(l))})},centralizame=()=>{const t=24,e=24,a=48,n=152;let s=0,o=0;const r=d3.select(".dm-job-city-graph"),c=r.select("svg"),d={};let l;const i=d3.format(".0%"),m=t=>i(t/100),u=d3.select(".dm-job-city-graph").append("div").attr("class","tooltip-container").style("opacity",0),p=l=>{const i=r.node().offsetWidth;h=600,s=i-n-e,o=h-t-a,c.attr("width",i).attr("height",h);const p="translate("+n+","+t+")",y=c.select(".dm-job-city-graph-container");y.attr("transform",p),((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(s,o);const x=r.select(".dm-job-city-graph-container-bis").selectAll(".bar-horizontal").data(l),g=x.enter().append("rect").attr("class","bar-horizontal").on("mouseover",t=>{u.transition().duration(300).style("opacity",1),u.html(`<p class="tooltip-centralizame">Ofertas de trabajo en <span class="tooltip-contralizame-ciudad">${t.ciudad} </span>${t.ofertas}<p/>`)});x.merge(g).attr("x",0).attr("y",t=>d.count.y(t.ciudad)).attr("height",d.count.y.bandwidth()).transition().duration(1500).ease(d3.easePolyInOut).attr("width",t=>d.count.x(t.cantidad)),(t=>{const e=d3.axisBottom(d.count.x).tickFormat(m).tickSize(-o);t.select(".axis-x").attr("transform","translate(0,"+o+")").call(e);const a=d3.axisLeft(d.count.y);t.select(".axis-y").call(a)})(y)};window.addEventListener("resize",()=>{p(l)}),d3.csv("csv/data-ciudades-porcentaje.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.ciudad=t.ciudad,t.cantidad=+t.cantidad}),l.sort((t,e)=>t.cantidad-e.cantidad),(()=>{const t=c.select(".dm-job-city-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-city-graph-container-bis"),t.append("text").attr("class","legend").attr("y","94%").style("text-anchor","start").text("Porcentaje de ofertas por ciudad")})(),(()=>{const t=d3.scaleLinear().domain([0,d3.max(l,t=>t.cantidad)]),e=d3.scaleBand().domain(l.map(t=>t.ciudad)).paddingInner(.2).paddingOuter(.5);d.count={x:t,y:e}})(),p(l))})},remote=()=>{const t=24,e=24,a=24,n=24;let s=0,o=0;const r=d3.select(".dm-job-remote-graph"),c=r.select("svg"),d={};let l;const i=d3.timeParse("%d-%b-%y"),m=d3.bisector(t=>t.fecha).left,u=r.append("div").attr("class","tooltip tooltip-remote").style("opacity",0),h=t=>{const a=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+o+")").call(a);const c=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-s);t.select(".axis-y").call(c);const i=t.select(".focus"),h=t.select(".overlay");i.select(".x-hover-line").attr("y2",o),h.attr("width",s+n+e).attr("height",o).on("mouseover",function(){i.style("display",null)}).on("mouseout",function(){i.style("display","none"),u.style("opacity",0)}).on("mousemove",function(){r.node().offsetWidth;const t=d.count.x.invert(d3.mouse(this)[0]),e=m(l,t,1),a=l[e-1],n=l[e],s=t-a.fecha>n.fecha-t?n:a;u.style("opacity",1).html(`<p class="tooltip-text">En ${s.mes} de ${s.year} se publicaron ${s.total} ofertas.<p/>`),i.select(".x-hover-line").attr("transform",`translate(${d.count.x(s.fecha)},0)`)})},p=l=>{const i=r.node().offsetWidth;s=i-n-e,o=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+n+","+t+")",u=c.select(".dm-job-remote-graph-container");u.attr("transform",m);const p=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(s,o);const y=r.select(".dm-job-remote-graph-container-bis"),x=y.selectAll(".lines").data([l]),g=x.enter().append("path").attr("class","lines").attr("stroke-width","1.5"),f=y.selectAll(".circles").data(l),v=f.enter().append("circle").attr("class","circles").attr("fill","#921d5d").attr("opacity",0).transition().duration(1800).ease(d3.easeLinear).attr("opacity",1);x.merge(g).attr("d",p),f.merge(v).attr("cx",t=>d.count.x(t.fecha)).attr("cy",t=>d.count.y(t.total)).attr("r",3),h(u);const b=g.node().getTotalLength();g.attr("stroke-dasharray",b+" "+b).attr("stroke-dashoffset",b).transition().duration(1500).ease(d3.easeLinear).attr("stroke-dashoffset",0)};window.addEventListener("resize",()=>{p(l)}),d3.csv("csv/data-remoto-mes.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.fecha=i(t.fecha),t.total=+t.total,t.mes=t.mes,t.year=t.year}),(()=>{const t=c.select(".dm-job-remote-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-remote-graph-container-bis"),t.append("rect").attr("class","overlay"),t.append("text").attr("class","legend").attr("y","2rem").style("text-anchor","start").text("Número de ofertas"),t.append("g").attr("class","focus").style("display","none").append("line").attr("class","x-hover-line hover-line").attr("y1",0),t.select(".focus").append("text").attr("class","text-focus")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(l,t=>t.total+t.total/4)]);d.count={x:t,y:e}})(),p(l))})},animateDendogram=()=>{const t=function(t,e){return 120*e};anime.timeline().add({targets:"#madrid-dendogram .mdl-two",strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-circle-middle",r:[0,5],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-text-job",opacity:[0,1],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .mdl-three",strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-circle-final",r:function(t){return t.getAttribute("mydata:id")},easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-text-percentage",opacity:[0,1],easing:"easeInOutSine",delay:t,duration:150})},dendogram=()=>{const t=document.querySelector("#madrid-dendogram"),e=document.querySelector("#barcelona-dendogram"),a=document.querySelector("#remote-dendogram");document.querySelector(".js-dm-job-dendogram-btn-m").addEventListener("click",()=>{lunar.removeClass(t,"dendo-hide"),lunar.addClass(e,"dendo-hide"),lunar.addClass(a,"dendo-hide")}),document.querySelector(".js-dm-job-dendogram-btn-b").addEventListener("click",()=>{lunar.removeClass(e,"dendo-hide"),lunar.addClass(t,"dendo-hide"),lunar.addClass(a,"dendo-hide")}),document.querySelector(".js-dm-job-dendogram-btn-r").addEventListener("click",()=>{lunar.removeClass(a,"dendo-hide"),lunar.addClass(e,"dendo-hide"),lunar.addClass(t,"dendo-hide")})};dendogram();const areaStack=()=>{const t=24,e=24,a=24,n=48;if(widthMobile<500){}let s=0,o=0;const r=d3.select(".dm-multiple-graph"),c=r.select("svg"),d={};let l;const i=l=>{const i=r.node().offsetWidth;s=i-n-e,o=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+n+","+t+")",u=c.select(".dm-multiple-graph-container");u.attr("transform",m);const h=l.columns.slice(1),p=d3.area().x((t,e)=>d.count.x(t.data.year)).y0(t=>d.count.y(t[0])).y1(t=>d.count.y(t[1])).curve(d3.curveCardinal.tension(.6)),y=d3.stack().keys(h).order(d3.stackOrderInsideOut)(l),x=d3.scaleOrdinal().domain(h).range(["#1DACE6","#1D366A","#F24C29","#E4C3A0","#C3CED0"]),g=c.selectAll(".label").data(x.domain()).enter().append("g").attr("class","label").attr("transform",(t,e)=>"translate(0, "+24*e+")");g.append("rect").attr("x",n+20).attr("y",n-8).attr("width",16).attr("height",16).style("fill",x),g.append("text").attr("class","legend-text").attr("x",n+45).attr("y",n).attr("dy",".35em").text(t=>t),((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(s,o);const f=r.select(".dm-multiple-graph-container-bis").selectAll(".area").data(y),v=f.enter().append("path").attr("class","area");f.merge(v).transition().duration(600).ease(d3.easeLinear).style("fill",t=>x(t.key)).attr("d",p),(t=>{const e=d3.axisBottom(d.count.x).tickFormat(d3.format("d")).ticks(5);t.select(".axis-x").attr("transform","translate(0,"+o+")").call(e);const a=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).tickSizeInner(-s).ticks(5);t.select(".axis-y").call(a)})(u)};window.addEventListener("resize",()=>{i(l)}),d3.csv("csv/data-line-puestos.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.year=t.year}),(()=>{const t=c.select(".dm-multiple-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-multiple-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.year)),e=d3.scaleLinear().domain([0,2e3]);d.count={x:t,y:e}})(),i(l))})},uxuiuxui=()=>{const t=24,e=24,a=48,n=40;let s=0,o=0;const r=d3.select(".dm-ux-ui-graph"),c=r.select("svg"),d={};let l;const i=d3.format(".0%"),m=t=>i(t/100),u=l=>{const i=r.node().offsetWidth;h=600,s=i-n-e,o=h-t-a,c.attr("width",i).attr("height",h);const u="translate("+n+","+t+")",p=c.select(".dm-ux-ui-graph-container");p.attr("transform",u),((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(s,o);const y=r.select(".dm-ux-ui-graph-container-bis").selectAll(".bar-horizontal").data(l),x=y.enter().append("rect").attr("class","bar-horizontal");y.merge(x).attr("x",0).attr("y",t=>d.count.y(t.puesto)).attr("height",d.count.y.bandwidth()).transition().duration(1500).ease(d3.easePolyInOut).attr("width",t=>d.count.x(t.cantidad)),(t=>{const e=d3.axisBottom(d.count.x).tickFormat(m).tickSize(-o);t.select(".axis-x").attr("transform","translate(0,"+o+")").call(e);const a=d3.axisLeft(d.count.y);t.select(".axis-y").call(a)})(p)};window.addEventListener("resize",()=>{u(l)}),d3.csv("csv/ux-ui-uxui.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.puesto=t.puesto,t.cantidad=+t.cantidad}),l.sort((t,e)=>t.cantidad-e.cantidad),(()=>{const t=c.select(".dm-ux-ui-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-ux-ui-graph-container-bis"),t.append("text").attr("class","legend").attr("y","94%").style("text-anchor","start").text("Porcentaje de ofertas"),t.append("text").attr("class","legend-number").attr("x","2rem").attr("y","23%").style("text-anchor","start").text("257"),t.append("text").attr("class","legend-number").attr("x","2rem").attr("y","46%").style("text-anchor","start").text("209"),t.append("text").attr("class","legend-number").attr("x","2rem").attr("y","69%").style("text-anchor","start").text("88")})(),(()=>{const t=d3.scaleLinear().domain([0,d3.max(l,t=>t.cantidad)]),e=d3.scaleBand().domain(l.map(t=>t.puesto)).paddingInner(.2).paddingOuter(.5);d.count={x:t,y:e}})(),u(l))})},flash=()=>{const t=24,e=24,a=24,n=24;let s=0,o=0;const r=d3.select(".dm-job-flash-graph"),c=r.select("svg"),d={};let l;const i=d3.timeParse("%d-%b-%y"),m=l=>{const i=r.node().offsetWidth;s=i-n-e,o=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+n+","+t+")",u=c.select(".dm-job-flash-graph-container");u.attr("transform",m);const h=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(s,o);const p=r.select(".dm-job-flash-graph-container-bis").selectAll(".line").data([l]),y=p.enter().append("path").attr("class","line").attr("stroke-width","1.5");p.merge(y).attr("d",h);const x=y.node().getTotalLength();y.attr("stroke-dasharray",x+" "+x).attr("stroke-dashoffset",x).transition().duration(1500).ease(d3.easeLinear).attr("stroke-dashoffset",0),(t=>{const e=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+o+")").call(e);const a=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-s);t.select(".axis-y").call(a)})(u)};window.addEventListener("resize",()=>{m(l)}),d3.csv("csv/data-flash-mes.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.fecha=i(t.fecha),t.total=+t.total}),(()=>{const t=c.select(".dm-job-flash-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-flash-graph-container-bis"),t.append("text").attr("class","legend").style("text-anchor","start").text("Número de ofertas")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(l,t=>t.total+t.total/4)]);d.count={x:t,y:e}})(),m(l))})},scrolama=()=>{document.querySelector("#scroll").querySelectorAll(".dm-job-generic");let t=scrollama();const e=t=>{0!==t.index||t.element.classList.contains("scrollaunch")?1!==t.index||t.element.classList.contains("scrollaunch")?2!==t.index||t.element.classList.contains("scrollaunch")?3!==t.index||t.element.classList.contains("scrollaunch")?4!==t.index||t.element.classList.contains("scrollaunch")?5!==t.index||t.element.classList.contains("scrollaunch")?6!==t.index||t.element.classList.contains("scrollaunch")||(flash(),t.element.classList.add("scrollaunch")):(uxuiuxui(),t.element.classList.add("scrollaunch")):(areaStack(),t.element.classList.add("scrollaunch")):(remote(),t.element.classList.add("scrollaunch")):(animateDendogram(),t.element.classList.add("scrollaunch")):(centralizame(),t.element.classList.add("scrollaunch")):(lineYear(),t.element.classList.add("scrollaunch"))};t.setup({step:".dm-job-generic",debug:!1,offset:.2}).onStepEnter(e),window.addEventListener("resize",t.resize)};scrolama();