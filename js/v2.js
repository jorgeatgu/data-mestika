const width=window.innerWidth>0?window.innerWidth:screen.width,menu=()=>{const t=document.querySelector(".overlay"),e=document.querySelector(".navegacion"),a=document.querySelector("body"),n=document.querySelectorAll(".navegacion-btn"),s=document.querySelector(".burger"),d=()=>{s.classList.toggle("clicked"),t.classList.toggle("show"),e.classList.toggle("show"),a.classList.toggle("overflow")};for(document.querySelector(".burger").addEventListener("click",d),document.querySelector(".overlay").addEventListener("click",d),i=0;i<n.length;i++)n[i].addEventListener("click",function(){c()});const c=()=>{t.classList.remove("show"),e.classList.remove("show"),s.classList.remove("clicked")}};menu();const line=()=>{const t=24,e=24,a=24,n=24;let s=0,d=0;const c=d3.select(".dm-job-year-graph"),r=c.select("svg"),o={};let i;const l=d3.timeParse("%d-%b-%y"),m=i=>{const l=c.node().offsetWidth;s=l-n-e,d=600-t-a,r.attr("width",l).attr("height",600);const m="translate("+n+","+t+")",g=r.select(".dm-job-year-graph-container");g.attr("transform",m);const u=d3.line().x(t=>o.count.x(t.fecha)).y(t=>o.count.y(t.total));((t,e)=>{o.count.x.range([0,t]),o.count.y.range([e,0])})(s,d);const h=c.select(".dm-job-year-graph-container-bis"),x=h.selectAll(".line").data([i]),p=x.enter().append("path").attr("class","line").attr("stroke-width","1.5"),y=h.selectAll(".circles").data(i),f=y.enter().append("circle").attr("class","circles").attr("fill","#921d5d");x.merge(p).attr("d",u),y.merge(f).attr("cx",t=>o.count.x(t.fecha)).attr("cy",t=>o.count.y(t.total)).attr("r",3),(t=>{const e=d3.axisBottom(o.count.x);t.select(".axis-x").attr("transform","translate(0,"+d+")").call(e);const a=d3.axisLeft(o.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-s);t.select(".axis-y").call(a)})(g)};window.addEventListener("resize",()=>{m(i)}),d3.csv("csv/data-ofertas-anyo.csv",(t,e)=>{t?console.log(t):((i=e).forEach(t=>{t.fecha=l(t.fecha),t.total=+t.total}),(()=>{const t=r.select(".dm-job-year-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-year-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(i,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(i,t=>t.total+t.total/4)]);o.count={x:t,y:e}})(),m(i))})};line();const barHorizontal=()=>{const t=24,e=24,a=24,n=152;let s=0,d=0;const c=d3.select(".dm-job-city-graph"),r=c.select("svg"),o={};let i;const l=d3.format(".0%"),m=t=>l(t/100),g=i=>{const l=c.node().offsetWidth;h=600,s=l-n-e,d=h-t-a,r.attr("width",l).attr("height",h);const g="translate("+n+","+t+")",u=r.select(".dm-job-city-graph-container");u.attr("transform",g),((t,e)=>{o.count.x.range([0,t]),o.count.y.range([e,0])})(s,d);const x=c.select(".dm-job-city-graph-container-bis").selectAll(".bar-horizontal").data(i),p=x.enter().append("rect").attr("class","bar-horizontal");x.merge(p).attr("x",0).attr("y",t=>o.count.y(t.ciudad)).attr("height",o.count.y.bandwidth()).transition().duration(1500).ease(d3.easePolyInOut).attr("width",t=>o.count.x(t.cantidad)),(t=>{const e=d3.axisBottom(o.count.x).tickFormat(m).tickSize(-d);t.select(".axis-x").attr("transform","translate(0,"+d+")").call(e);const a=d3.axisLeft(o.count.y);t.select(".axis-y").call(a)})(u)};window.addEventListener("resize",()=>{g(i)}),d3.csv("csv/data-ciudades-porcentaje.csv",(t,e)=>{t?console.log(t):((i=e).forEach(t=>{t.ciudad=t.ciudad,t.cantidad=+t.cantidad}),i.sort((t,e)=>t.cantidad-e.cantidad),(()=>{const t=r.select(".dm-job-city-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-city-graph-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([0,d3.max(i,t=>t.cantidad)]),e=d3.scaleBand().domain(i.map(t=>t.ciudad)).paddingInner(.2).paddingOuter(.5);o.count={x:t,y:e}})(),g(i))})};barHorizontal();const remote=()=>{const t=24,e=24,a=24,n=24;let s=0,d=0;const c=d3.select(".dm-job-remote-graph"),r=c.select("svg"),o={};let i;const l=d3.timeParse("%d-%b-%y"),m=i=>{const l=c.node().offsetWidth;s=l-n-e,d=600-t-a,r.attr("width",l).attr("height",600);const m="translate("+n+","+t+")",g=r.select(".dm-job-remote-graph-container");g.attr("transform",m);const u=d3.line().x(t=>o.count.x(t.fecha)).y(t=>o.count.y(t.total));((t,e)=>{o.count.x.range([0,t]),o.count.y.range([e,0])})(s,d);const h=c.select(".dm-job-remote-graph-container-bis"),x=h.selectAll(".lines").data([i]),p=x.enter().append("path").attr("class","lines").attr("stroke-width","1.5"),y=h.selectAll(".circles").data(i),f=y.enter().append("circle").attr("class","circles").attr("fill","#921d5d");x.merge(p).attr("d",u),y.merge(f).attr("cx",t=>o.count.x(t.fecha)).attr("cy",t=>o.count.y(t.total)).attr("r",3),(t=>{const e=d3.axisBottom(o.count.x);t.select(".axis-x").attr("transform","translate(0,"+d+")").call(e);const a=d3.axisLeft(o.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-s);t.select(".axis-y").call(a)})(g)};window.addEventListener("resize",()=>{m(i)}),d3.csv("csv/data-remoto-mes.csv",(t,e)=>{t?console.log(t):((i=e).forEach(t=>{t.fecha=l(t.fecha),t.total=+t.total}),(()=>{const t=r.select(".dm-job-remote-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-remote-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(i,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(i,t=>t.total+t.total/4)]);o.count={x:t,y:e}})(),m(i))})};remote();const flash=()=>{const t=24,e=24,a=24,n=24;let s=0,d=0;const c=d3.select(".dm-job-flash-graph"),r=c.select("svg"),o={};let i;const l=d3.timeParse("%d-%b-%y"),m=i=>{const l=c.node().offsetWidth;s=l-n-e,d=600-t-a,r.attr("width",l).attr("height",600);const m="translate("+n+","+t+")",g=r.select(".dm-job-flash-graph-container");g.attr("transform",m);const u=d3.line().x(t=>o.count.x(t.fecha)).y(t=>o.count.y(t.total));((t,e)=>{o.count.x.range([0,t]),o.count.y.range([e,0])})(s,d);const h=c.select(".dm-job-flash-graph-container-bis").selectAll(".line").data([i]),x=h.enter().append("path").attr("class","line").attr("stroke-width","1.5");h.merge(x).attr("d",u),(t=>{const e=d3.axisBottom(o.count.x);t.select(".axis-x").attr("transform","translate(0,"+d+")").call(e);const a=d3.axisLeft(o.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-s);t.select(".axis-y").call(a)})(g)};window.addEventListener("resize",()=>{m(i)}),d3.csv("csv/data-flash-mes.csv",(t,e)=>{t?console.log(t):((i=e).forEach(t=>{t.fecha=l(t.fecha),t.total=+t.total}),(()=>{const t=r.select(".dm-job-flash-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-flash-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(i,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(i,t=>t.total+t.total/4)]);o.count={x:t,y:e}})(),m(i))})};flash();const multipleLines=()=>{const t=48,e=24,a=24,n=24,s=960-n-e,d=220-t-a;d3.scaleOrdinal(["#9a1622","#e30613","#0080b8","#f07a36"]);let c=d3.timeParse("%x");const r=d3.scaleTime().range([0,s]),o=d3.scaleLinear().range([d,0]),i=d3.area().x(t=>r(t.fecha)).y0(d).y1(t=>o(t.cantidad)).curve(d3.curveBasis),l=d3.line().x(t=>r(t.fecha)).y(t=>o(t.cantidad)).curve(d3.curveBasis);d3.csv("csv/data-line-puestos.csv",function(t){return t.cantidad=+t.cantidad,t.fecha=c(t.fecha),t},(c,m)=>{const g=d3.nest().key(t=>t.puesto).entries(m);g.forEach(function(t){t.maxPrice=d3.max(t.values,t=>t.cantidad)}),r.domain([d3.min(m,t=>t.fecha),d3.max(m,t=>t.fecha)]),o.domain([d3.min(m,t=>t.cantidad),d3.max(m,t=>t.cantidad)]);const u=d3.select(".dm-multiple-container-graph").selectAll("svg").data(g).enter().append("svg").attr("viewBox","0 0 "+(s+(n+e))+"  "+(d+(t+a))).append("g").attr("transform","translate("+n+","+t+")");u.append("g").attr("class","axis axis-x"),u.append("g").attr("class","axis axis-y");const h=d3.axisBottom(r).tickFormat(d3.timeFormat("%Y")).ticks(5),x=d3.axisLeft(o).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-s);u.select(".axis-x").attr("transform","translate(0,"+d+")").call(h),u.select(".axis-y").call(x),u.append("path").attr("class","area").attr("class",t=>t.key).style("opacity",.7).attr("d",t=>i(t.values)),u.append("path").attr("class","line").attr("d",t=>l(t.values)).style("stroke","#111"),u.append("text").attr("class","multiple-legend").attr("x",16).attr("y",-10).style("text-anchor","start").text(t=>t.key)})};multipleLines();const animateDendogram=()=>{const t=function(t,e){return 120*e};anime.timeline().add({targets:"#madrid-dendogram .mdl-two",strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-circle-middle",r:[0,5],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-text-job",opacity:[0,1],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .mdl-three",strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-circle-final",r:function(t){return t.getAttribute("mydata:id")},easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-text-percentage",opacity:[0,1],easing:"easeInOutSine",delay:t,duration:150})};animateDendogram();const dendogram=()=>{const t=document.querySelector("#madrid-dendogram"),e=document.querySelector("#barcelona-dendogram"),a=document.querySelector("#remote-dendogram");document.querySelector(".js-dm-job-dendogram-btn-m").addEventListener("click",()=>{lunar.removeClass(t,"dendo-hide"),lunar.addClass(e,"dendo-hide"),lunar.addClass(a,"dendo-hide")}),document.querySelector(".js-dm-job-dendogram-btn-b").addEventListener("click",()=>{lunar.removeClass(e,"dendo-hide"),lunar.addClass(t,"dendo-hide"),lunar.addClass(a,"dendo-hide")}),document.querySelector(".js-dm-job-dendogram-btn-r").addEventListener("click",()=>{lunar.removeClass(a,"dendo-hide"),lunar.addClass(e,"dendo-hide"),lunar.addClass(t,"dendo-hide")})};dendogram();