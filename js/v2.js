const line=()=>{const t=24,a=24,e=24,s=24;let c=0,n=0;const r=d3.select(".dm-job-year-graph"),o=r.select("svg"),d={};let i;const l=d3.timeParse("%d-%b-%y"),m=i=>{const l=r.node().offsetWidth;c=l-s-a,n=600-t-e,o.attr("width",l).attr("height",600);const m="translate("+s+","+t+")",x=o.select(".dm-job-year-graph-container");x.attr("transform",m);const h=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,n);const p=r.select(".dm-job-year-graph-container-bis"),g=p.selectAll(".line").data([i]),f=g.enter().append("path").attr("class","line").attr("stroke-width","1.5"),y=p.selectAll(".circles").data(i),u=y.enter().append("circle").attr("class","circles").attr("fill","#921d5d");g.merge(f).attr("d",h),y.merge(u).attr("cx",t=>d.count.x(t.fecha)).attr("cy",t=>d.count.y(t.total)).attr("r",3),(t=>{const a=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+n+")").call(a);const e=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-c);t.select(".axis-y").call(e)})(x)};window.addEventListener("resize",()=>{m(i)}),d3.csv("csv/data-ofertas-anyo.csv",(t,a)=>{t?console.log(t):((i=a).forEach(t=>{t.fecha=l(t.fecha),t.total=+t.total}),(()=>{const t=o.select(".dm-job-year-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-year-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(i,t=>t.fecha)),a=d3.scaleLinear().domain([0,d3.max(i,t=>t.total+t.total/4)]);d.count={x:t,y:a}})(),m(i))})};line();const barHorizontal=()=>{const t=24,a=24,e=24,s=152;let c=0,n=0;const r=d3.select(".dm-job-city-graph"),o=r.select("svg"),d={};let i;const l=d3.format(".0%"),m=t=>l(t/100),x=i=>{const l=r.node().offsetWidth;h=600,c=l-s-a,n=h-t-e,o.attr("width",l).attr("height",h);const x="translate("+s+","+t+")",p=o.select(".dm-job-city-graph-container");p.attr("transform",x),((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,n);const g=r.select(".dm-job-city-graph-container-bis").selectAll(".bar-horizontal").data(i),f=g.enter().append("rect").attr("class","bar-horizontal");g.merge(f).attr("x",0).attr("y",t=>d.count.y(t.ciudad)).attr("height",d.count.y.bandwidth()).transition().duration(1500).ease(d3.easePolyInOut).attr("width",t=>d.count.x(t.cantidad)),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(m).tickSize(-n);t.select(".axis-x").attr("transform","translate(0,"+n+")").call(a);const e=d3.axisLeft(d.count.y);t.select(".axis-y").call(e)})(p)};window.addEventListener("resize",()=>{x(i)}),d3.csv("csv/data-ciudades-porcentaje.csv",(t,a)=>{t?console.log(t):((i=a).forEach(t=>{t.ciudad=t.ciudad,t.cantidad=+t.cantidad}),i.sort((t,a)=>t.cantidad-a.cantidad),(()=>{const t=o.select(".dm-job-city-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-city-graph-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([0,d3.max(i,t=>t.cantidad)]),a=d3.scaleBand().domain(i.map(t=>t.ciudad)).paddingInner(.2).paddingOuter(.5);d.count={x:t,y:a}})(),x(i))})};barHorizontal();const remote=()=>{const t=24,a=24,e=24,s=24;let c=0,n=0;const r=d3.select(".dm-job-remote-graph"),o=r.select("svg"),d={};let i;const l=d3.timeParse("%d-%b-%y"),m=i=>{const l=r.node().offsetWidth;c=l-s-a,n=600-t-e,o.attr("width",l).attr("height",600);const m="translate("+s+","+t+")",x=o.select(".dm-job-remote-graph-container");x.attr("transform",m);const h=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,n);const p=r.select(".dm-job-remote-graph-container-bis"),g=p.selectAll(".lines").data([i]),f=g.enter().append("path").attr("class","lines").attr("stroke-width","1.5"),y=p.selectAll(".circles").data(i),u=y.enter().append("circle").attr("class","circles").attr("fill","#921d5d");g.merge(f).attr("d",h),y.merge(u).attr("cx",t=>d.count.x(t.fecha)).attr("cy",t=>d.count.y(t.total)).attr("r",3),(t=>{const a=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+n+")").call(a);const e=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-c);t.select(".axis-y").call(e)})(x)};window.addEventListener("resize",()=>{m(i)}),d3.csv("csv/data-remoto-mes.csv",(t,a)=>{t?console.log(t):((i=a).forEach(t=>{t.fecha=l(t.fecha),t.total=+t.total}),(()=>{const t=o.select(".dm-job-remote-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-remote-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(i,t=>t.fecha)),a=d3.scaleLinear().domain([0,d3.max(i,t=>t.total+t.total/4)]);d.count={x:t,y:a}})(),m(i))})};remote();const flash=()=>{const t=24,a=24,e=24,s=24;let c=0,n=0;const r=d3.select(".dm-job-flash-graph"),o=r.select("svg"),d={};let i;const l=d3.timeParse("%d-%b-%y"),m=i=>{const l=r.node().offsetWidth;c=l-s-a,n=600-t-e,o.attr("width",l).attr("height",600);const m="translate("+s+","+t+")",x=o.select(".dm-job-flash-graph-container");x.attr("transform",m);const h=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,n);const p=r.select(".dm-job-flash-graph-container-bis").selectAll(".line").data([i]),g=p.enter().append("path").attr("class","line").attr("stroke-width","1.5");p.merge(g).attr("d",h),(t=>{const a=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+n+")").call(a);const e=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-c);t.select(".axis-y").call(e)})(x)};window.addEventListener("resize",()=>{m(i)}),d3.csv("csv/data-flash-mes.csv",(t,a)=>{t?console.log(t):((i=a).forEach(t=>{t.fecha=l(t.fecha),t.total=+t.total}),(()=>{const t=o.select(".dm-job-flash-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-flash-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(i,t=>t.fecha)),a=d3.scaleLinear().domain([0,d3.max(i,t=>t.total+t.total/4)]);d.count={x:t,y:a}})(),m(i))})};flash();const multipleLines=()=>{const t=48,a=24,e=24,s=24,c=960-s-a,n=220-t-e;d3.scaleOrdinal(["#9a1622","#e30613","#0080b8","#f07a36"]);let r=d3.timeParse("%x");const o=d3.scaleTime().range([0,c]),d=d3.scaleLinear().range([n,0]),i=d3.area().x(t=>o(t.fecha)).y0(n).y1(t=>d(t.cantidad)).curve(d3.curveBasis),l=d3.line().x(t=>o(t.fecha)).y(t=>d(t.cantidad)).curve(d3.curveBasis);d3.csv("csv/data-line-puestos.csv",function(t){return t.cantidad=+t.cantidad,t.fecha=r(t.fecha),t},(r,m)=>{const x=d3.nest().key(t=>t.puesto).entries(m);x.forEach(function(t){t.maxPrice=d3.max(t.values,t=>t.cantidad)}),o.domain([d3.min(m,t=>t.fecha),d3.max(m,t=>t.fecha)]),d.domain([d3.min(m,t=>t.cantidad),d3.max(m,t=>t.cantidad)]);const h=d3.select(".dm-multiple-container-graph").selectAll("svg").data(x).enter().append("svg").attr("viewBox","0 0 "+(c+(s+a))+"  "+(n+(t+e))).append("g").attr("transform","translate("+s+","+t+")");h.append("g").attr("class","axis axis-x"),h.append("g").attr("class","axis axis-y");const p=d3.axisBottom(o).tickFormat(d3.timeFormat("%Y")).ticks(5),g=d3.axisLeft(d).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-c);h.select(".axis-x").attr("transform","translate(0,"+n+")").call(p),h.select(".axis-y").call(g),h.append("path").attr("class","area").attr("class",t=>t.key).style("opacity",.7).attr("d",t=>i(t.values)),h.append("path").attr("class","line").attr("d",t=>l(t.values)).style("stroke","#111"),h.append("text").attr("class","multiple-legend").attr("x",16).attr("y",-10).style("text-anchor","start").text(t=>t.key)})};multipleLines();