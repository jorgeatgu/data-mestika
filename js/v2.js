const widthMobile=window.innerWidth>0?window.innerWidth:screen.width,menu=()=>{const t=document.querySelector(".overlay"),e=document.querySelector(".navegacion"),a=document.querySelector("body"),s=document.querySelectorAll(".navegacion-btn"),n=document.querySelector(".burger"),r=()=>{n.classList.toggle("clicked"),t.classList.toggle("show"),e.classList.toggle("show"),a.classList.toggle("overflow")};for(document.querySelector(".burger").addEventListener("click",r),document.querySelector(".overlay").addEventListener("click",r),i=0;i<s.length;i++)s[i].addEventListener("click",function(){o()});const o=()=>{t.classList.remove("show"),e.classList.remove("show"),n.classList.remove("clicked")}};menu();const lineYear=()=>{const t=24,e=24,a=24,s=24;let n=0,r=0;const o=d3.select(".dm-job-year-graph"),c=o.select("svg"),d={};let l;const i=d3.timeParse("%d-%b-%y"),m=d3.bisector(t=>t.fecha).left,u=t=>{const a=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+r+")").call(a);const o=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-n);t.select(".axis-y").call(o);const c=t.select(".focus"),i=t.select(".overlay");c.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",r),c.append("line").attr("class","y-hover-line hover-line").attr("x1",n).attr("x2",n),c.append("circle").attr("class","circle-focus").attr("r",2),c.append("text").attr("class","text-focus").attr("x",-10).attr("y",-30).attr("dy",".31em"),i.attr("width",n+s+e).attr("height",r).on("mouseover",function(){c.style("display",null)}).on("mouseout",function(){c.style("display","none")}).on("mousemove",function(){const t=d.count.x.invert(d3.mouse(this)[0]),e=m(l,t,1),a=l[e-1],s=l[e],n=t-a.fecha>s.fecha-t?s:a;c.attr("transform","translate("+d.count.x(n.fecha)+","+d.count.y(n.total)+")"),c.select("text").text(n.total),c.select(".x-hover-line").attr("y2",r-d.count.y(n.total)),c.select(".y-hover-line").attr("x1",0-d.count.x(n.fecha))})},h=l=>{const i=o.node().offsetWidth;n=i-s-e,r=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+s+","+t+")",h=c.select(".dm-job-year-graph-container");h.attr("transform",m);const x=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(n,r);const g=o.select(".dm-job-year-graph-container-bis"),p=g.selectAll(".line").data([l]),y=p.enter().append("path").attr("class","line").attr("stroke-width","1.5"),f=g.selectAll(".circles").data(l),b=f.enter().append("circle").attr("class","circles").attr("fill","#921d5d").attr("opacity",0).transition().duration(1800).ease(d3.easeLinear).attr("opacity",1);p.merge(y).attr("d",x),f.merge(b).attr("cx",t=>d.count.x(t.fecha)).attr("cy",t=>d.count.y(t.total)).attr("r",3),u(h);const v=y.node().getTotalLength();y.attr("stroke-dasharray",v+" "+v).attr("stroke-dashoffset",v).transition().duration(1500).ease(d3.easeLinear).attr("stroke-dashoffset",0)};window.addEventListener("resize",()=>{h(l)}),d3.csv("csv/data-ofertas-anyo.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.fecha=i(t.fecha),t.total=+t.total}),(()=>{const t=c.select(".dm-job-year-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-year-graph-container-bis"),t.append("text").attr("class","legend").attr("y","1rem").style("text-anchor","start").text("Número de ofertas"),t.append("rect").attr("class","overlay"),t.append("g").attr("class","focus").style("display","none")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(l,t=>t.total+t.total/4)]);d.count={x:t,y:e}})(),h(l))})},centralizame=()=>{const t=48,e=24,a=24,s=152;let n=0,r=0;const o=d3.select(".dm-job-city-graph"),c=o.select("svg"),d={};let l;const i=d3.format(".0%"),m=t=>i(t/100),u=d3.select(".dm-job-city-graph").append("div").attr("class","tooltip-container").style("opacity",0),x=l=>{const i=o.node().offsetWidth;h=600,n=i-s-e,r=h-t-a,c.attr("width",i).attr("height",h);const x="translate("+s+","+t+")",g=c.select(".dm-job-city-graph-container");g.attr("transform",x),((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(n,r);const p=o.select(".dm-job-city-graph-container-bis").selectAll(".bar-horizontal").data(l),y=p.enter().append("rect").attr("class","bar-horizontal").on("mouseover",t=>{u.transition().duration(300).style("opacity",1),u.html('<p class="tooltip-centralizame">Ofertas de trabajo en <span class="tooltip-contralizame-ciudad">'+t.ciudad+" </span>"+t.ofertas+"<p/>")});p.merge(y).attr("x",0).attr("y",t=>d.count.y(t.ciudad)).attr("height",d.count.y.bandwidth()).transition().duration(1500).ease(d3.easePolyInOut).attr("width",t=>d.count.x(t.cantidad)),(t=>{const e=d3.axisBottom(d.count.x).tickFormat(m).tickSize(-r);t.select(".axis-x").attr("transform","translate(0,"+r+")").call(e);const a=d3.axisLeft(d.count.y);t.select(".axis-y").call(a)})(g)};window.addEventListener("resize",()=>{x(l)}),d3.csv("csv/data-ciudades-porcentaje.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.ciudad=t.ciudad,t.cantidad=+t.cantidad}),l.sort((t,e)=>t.cantidad-e.cantidad),(()=>{const t=c.select(".dm-job-city-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-city-graph-container-bis"),t.append("text").attr("class","legend").attr("x","30%").style("text-anchor","start").text("Porcentaje de ofertas por ciudad")})(),(()=>{const t=d3.scaleLinear().domain([0,d3.max(l,t=>t.cantidad)]),e=d3.scaleBand().domain(l.map(t=>t.ciudad)).paddingInner(.2).paddingOuter(.5);d.count={x:t,y:e}})(),x(l))})},remote=()=>{const t=24,e=24,a=24,s=24;let n=0,r=0;const o=d3.select(".dm-job-remote-graph"),c=o.select("svg"),d={};let l;const i=d3.timeParse("%d-%b-%y"),m=l=>{const i=o.node().offsetWidth;n=i-s-e,r=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+s+","+t+")",u=c.select(".dm-job-remote-graph-container");u.attr("transform",m);const h=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(n,r);const x=o.select(".dm-job-remote-graph-container-bis"),g=x.selectAll(".lines").data([l]),p=g.enter().append("path").attr("class","lines").attr("stroke-width","1.5"),y=x.selectAll(".circles").data(l),f=y.enter().append("circle").attr("class","circles").attr("fill","#921d5d").attr("opacity",0).transition().duration(1800).ease(d3.easeLinear).attr("opacity",1);g.merge(p).attr("d",h),y.merge(f).attr("cx",t=>d.count.x(t.fecha)).attr("cy",t=>d.count.y(t.total)).attr("r",3),(t=>{const e=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+r+")").call(e);const a=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-n);t.select(".axis-y").call(a)})(u);const b=p.node().getTotalLength();p.attr("stroke-dasharray",b+" "+b).attr("stroke-dashoffset",b).transition().duration(1500).ease(d3.easeLinear).attr("stroke-dashoffset",0)};window.addEventListener("resize",()=>{m(l)}),d3.csv("csv/data-remoto-mes.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.fecha=i(t.fecha),t.total=+t.total}),(()=>{const t=c.select(".dm-job-remote-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-remote-graph-container-bis"),t.append("text").attr("class","legend").attr("y","2rem").style("text-anchor","start").text("Número de ofertas")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(l,t=>t.total+t.total/4)]);d.count={x:t,y:e}})(),m(l))})},animateDendogram=()=>{const t=function(t,e){return 120*e};anime.timeline().add({targets:"#madrid-dendogram .mdl-two",strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-circle-middle",r:[0,5],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-text-job",opacity:[0,1],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .mdl-three",strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-circle-final",r:function(t){return t.getAttribute("mydata:id")},easing:"easeInOutSine",delay:t,duration:150}).add({targets:"#madrid-dendogram .madrid-dendogram-text-percentage",opacity:[0,1],easing:"easeInOutSine",delay:t,duration:150})},dendogram=()=>{const t=document.querySelector("#madrid-dendogram"),e=document.querySelector("#barcelona-dendogram"),a=document.querySelector("#remote-dendogram");document.querySelector(".js-dm-job-dendogram-btn-m").addEventListener("click",()=>{lunar.removeClass(t,"dendo-hide"),lunar.addClass(e,"dendo-hide"),lunar.addClass(a,"dendo-hide")}),document.querySelector(".js-dm-job-dendogram-btn-b").addEventListener("click",()=>{lunar.removeClass(e,"dendo-hide"),lunar.addClass(t,"dendo-hide"),lunar.addClass(a,"dendo-hide")}),document.querySelector(".js-dm-job-dendogram-btn-r").addEventListener("click",()=>{lunar.removeClass(a,"dendo-hide"),lunar.addClass(e,"dendo-hide"),lunar.addClass(t,"dendo-hide")})};dendogram();const areaStack=()=>{const t=24,e=24,a=24,s=48;if(widthMobile<500){}let n=0,r=0;const o=d3.select(".dm-multiple-graph"),c=o.select("svg"),d={};let l;const i=l=>{const i=o.node().offsetWidth;n=i-s-e,r=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+s+","+t+")",u=c.select(".dm-multiple-graph-container");u.attr("transform",m);const h=l.columns.slice(1),x=d3.area().x((t,e)=>d.count.x(t.data.year)).y0(t=>d.count.y(t[0])).y1(t=>d.count.y(t[1])).curve(d3.curveCardinal.tension(.6)),g=d3.stack().keys(h).order(d3.stackOrderInsideOut)(l),p=d3.scaleOrdinal().domain(h).range(["#1DACE6","#1D366A","#F24C29","#E4C3A0","#C3CED0"]),y=c.selectAll(".label").data(p.domain()).enter().append("g").attr("class","label").attr("transform",(t,e)=>"translate(0, "+24*e+")");y.append("rect").attr("x",s+20).attr("y",s-8).attr("width",16).attr("height",16).style("fill",p),y.append("text").attr("class","legend-text").attr("x",s+45).attr("y",s).attr("dy",".35em").text(t=>t),((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(n,r);const f=o.select(".dm-multiple-graph-container-bis").selectAll(".area").data(g),b=f.enter().append("path").attr("class","area");f.merge(b).transition().duration(600).ease(d3.easeLinear).style("fill",t=>p(t.key)).attr("d",x),(t=>{const e=d3.axisBottom(d.count.x).tickFormat(d3.format("d")).ticks(5);t.select(".axis-x").attr("transform","translate(0,"+r+")").call(e);const a=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).tickSizeInner(-n).ticks(5);t.select(".axis-y").call(a)})(u)};window.addEventListener("resize",()=>{i(l)}),d3.csv("csv/data-line-puestos.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.year=t.year}),(()=>{const t=c.select(".dm-multiple-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-multiple-graph-container-bis")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.year)),e=d3.scaleLinear().domain([0,2e3]);d.count={x:t,y:e}})(),i(l))})},uxuiuxui=()=>{const t=24,e=24,a=24,s=40;let n=0,r=0;const o=d3.select(".dm-ux-ui-graph"),c=o.select("svg"),d={};let l;const i=d3.format(".0%"),m=t=>i(t/100),u=l=>{const i=o.node().offsetWidth;h=600,n=i-s-e,r=h-t-a,c.attr("width",i).attr("height",h);const u="translate("+s+","+t+")",x=c.select(".dm-ux-ui-graph-container");x.attr("transform",u),((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(n,r);const g=o.select(".dm-ux-ui-graph-container-bis").selectAll(".bar-horizontal").data(l),p=g.enter().append("rect").attr("class","bar-horizontal");g.merge(p).attr("x",0).attr("y",t=>d.count.y(t.puesto)).attr("height",d.count.y.bandwidth()).transition().duration(1500).ease(d3.easePolyInOut).attr("width",t=>d.count.x(t.cantidad)),(t=>{const e=d3.axisBottom(d.count.x).tickFormat(m).tickSize(-r);t.select(".axis-x").attr("transform","translate(0,"+r+")").call(e);const a=d3.axisLeft(d.count.y);t.select(".axis-y").call(a)})(x)};window.addEventListener("resize",()=>{u(l)}),d3.csv("csv/ux-ui-uxui.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.puesto=t.puesto,t.cantidad=+t.cantidad}),l.sort((t,e)=>t.cantidad-e.cantidad),(()=>{const t=c.select(".dm-ux-ui-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-ux-ui-graph-container-bis"),t.append("text").attr("class","legend").style("text-anchor","start").text("Porcentaje de ofertas"),t.append("text").attr("class","legend-number").attr("x","2rem").attr("y","23%").style("text-anchor","start").text("257"),t.append("text").attr("class","legend-number").attr("x","2rem").attr("y","48.05%").style("text-anchor","start").text("209"),t.append("text").attr("class","legend-number").attr("x","2rem").attr("y","72%").style("text-anchor","start").text("88")})(),(()=>{const t=d3.scaleLinear().domain([0,d3.max(l,t=>t.cantidad)]),e=d3.scaleBand().domain(l.map(t=>t.puesto)).paddingInner(.2).paddingOuter(.5);d.count={x:t,y:e}})(),u(l))})},flash=()=>{const t=24,e=24,a=24,s=24;let n=0,r=0;const o=d3.select(".dm-job-flash-graph"),c=o.select("svg"),d={};let l;const i=d3.timeParse("%d-%b-%y"),m=l=>{const i=o.node().offsetWidth;n=i-s-e,r=600-t-a,c.attr("width",i).attr("height",600);const m="translate("+s+","+t+")",u=c.select(".dm-job-flash-graph-container");u.attr("transform",m);const h=d3.line().x(t=>d.count.x(t.fecha)).y(t=>d.count.y(t.total));((t,e)=>{d.count.x.range([0,t]),d.count.y.range([e,0])})(n,r);const x=o.select(".dm-job-flash-graph-container-bis").selectAll(".line").data([l]),g=x.enter().append("path").attr("class","line").attr("stroke-width","1.5");x.merge(g).attr("d",h);const p=g.node().getTotalLength();g.attr("stroke-dasharray",p+" "+p).attr("stroke-dashoffset",p).transition().duration(1500).ease(d3.easeLinear).attr("stroke-dashoffset",0),(t=>{const e=d3.axisBottom(d.count.x);t.select(".axis-x").attr("transform","translate(0,"+r+")").call(e);const a=d3.axisLeft(d.count.y).tickFormat(d3.format("d")).ticks(10).tickSizeInner(-n);t.select(".axis-y").call(a)})(u)};window.addEventListener("resize",()=>{m(l)}),d3.csv("csv/data-flash-mes.csv",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.fecha=i(t.fecha),t.total=+t.total}),(()=>{const t=c.select(".dm-job-flash-graph-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","dm-job-flash-graph-container-bis"),t.append("text").attr("class","legend").style("text-anchor","start").text("Número de ofertas")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.fecha)),e=d3.scaleLinear().domain([0,d3.max(l,t=>t.total+t.total/4)]);d.count={x:t,y:e}})(),m(l))})},scrolama=()=>{document.querySelector("#scroll").querySelectorAll(".dm-job-generic");let t=scrollama();const e=t=>{0!==t.index||t.element.classList.contains("scrollaunch")?1!==t.index||t.element.classList.contains("scrollaunch")?2!==t.index||t.element.classList.contains("scrollaunch")?3!==t.index||t.element.classList.contains("scrollaunch")?4!==t.index||t.element.classList.contains("scrollaunch")?5!==t.index||t.element.classList.contains("scrollaunch")?6!==t.index||t.element.classList.contains("scrollaunch")||(flash(),t.element.classList.add("scrollaunch")):(uxuiuxui(),t.element.classList.add("scrollaunch")):(areaStack(),t.element.classList.add("scrollaunch")):(remote(),t.element.classList.add("scrollaunch")):(animateDendogram(),t.element.classList.add("scrollaunch")):(centralizame(),t.element.classList.add("scrollaunch")):(lineYear(),t.element.classList.add("scrollaunch"))};t.setup({step:".dm-job-generic",debug:!1,offset:.2}).onStepEnter(e),window.addEventListener("resize",t.resize)};scrolama();